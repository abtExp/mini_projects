<!doctype html>
<html>

<head>
    <meta charset='utf-8' />
    <meta name='viewport' content='width=device-width,initial-scale=1.0' />
    <meta name='description' content='' />
    <meta name='keywords' content='' />
    <meta name='theme-color' content='' />
    <title></title>
    <link rel='stylesheet' href='' />
</head>

<body>
    <script>
        const {
            ipcRenderer,
            desktopCapturer,
            remote
        } = require('electron');
        ipcRenderer.on('capture', () => {
            desktopCapturer.getSources({
                    types: ['window', 'screen']
                },
                (err, src) => {
                    console.log('asdaf');
                    if (err) throw new Error(err);
                    for (let i = 0; i < src.length; i++) {
                        navigator.webkitGetUserMedia({
                            audio: false,
                            video: {
                                mandatory: {
                                    chromeMediaSource: 'desktop',
                                    chromeMediaSourceId: src[i].id
                                }
                            }
                        }, handleStream, error)
                    }
                    return;
                })
        })


        function handleStream(str) {
            console.log(str);
            console.log('aashdfjak');
        }
    </script>
</body>

</html>